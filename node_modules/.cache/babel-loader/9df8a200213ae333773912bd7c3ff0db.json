{"ast":null,"code":"/**\n * @license\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as axis_util from './axis_util';\n/**\n * Gradient helper function for the min and max operations.\n */\n\nexport function gradForMinAndMax(dy, y, xOrig, origAxes, permutedAxes) {\n  if (y.rank < xOrig.rank) {\n    y = y.reshape(axis_util.expandShapeToKeepDim(y.shape, origAxes));\n  }\n\n  if (dy.rank < xOrig.rank) {\n    dy = dy.reshape(axis_util.expandShapeToKeepDim(dy.shape, origAxes));\n  }\n\n  return {\n    x: () => {\n      const dx = dy.mul(xOrig.equal(y).cast(dy.dtype));\n      return permutedAxes == null ? dx : dx.transpose(permutedAxes);\n    }\n  };\n}","map":{"version":3,"sources":["../../src/ops/reduction_ops_util.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;AAkBA,OAAO,KAAK,SAAZ,MAA2B,aAA3B;AAEA;;;;AAGA,OAAM,SAAU,gBAAV,CACF,EADE,EACK,CADL,EACW,KADX,EAC0B,QAD1B,EAC8C,YAD9C,EACoE;AACxE,MAAI,CAAC,CAAC,IAAF,GAAS,KAAK,CAAC,IAAnB,EAAyB;AACvB,IAAA,CAAC,GAAG,CAAC,CAAC,OAAF,CAAU,SAAS,CAAC,oBAAV,CAA+B,CAAC,CAAC,KAAjC,EAAwC,QAAxC,CAAV,CAAJ;AACD;;AACD,MAAI,EAAE,CAAC,IAAH,GAAU,KAAK,CAAC,IAApB,EAA0B;AACxB,IAAA,EAAE,GAAG,EAAE,CAAC,OAAH,CAAW,SAAS,CAAC,oBAAV,CAA+B,EAAE,CAAC,KAAlC,EAAyC,QAAzC,CAAX,CAAL;AACD;;AACD,SAAO;AACL,IAAA,CAAC,EAAE,MAAK;AACN,YAAM,EAAE,GAAG,EAAE,CAAC,GAAH,CAAO,KAAK,CAAC,KAAN,CAAY,CAAZ,EAAe,IAAf,CAAoB,EAAE,CAAC,KAAvB,CAAP,CAAX;AACA,aAAO,YAAY,IAAI,IAAhB,GAAuB,EAAvB,GAA4B,EAAE,CAAC,SAAH,CAAa,YAAb,CAAnC;AACD;AAJI,GAAP;AAMD","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as axis_util from './axis_util';\n/**\n * Gradient helper function for the min and max operations.\n */\nexport function gradForMinAndMax(dy, y, xOrig, origAxes, permutedAxes) {\n    if (y.rank < xOrig.rank) {\n        y = y.reshape(axis_util.expandShapeToKeepDim(y.shape, origAxes));\n    }\n    if (dy.rank < xOrig.rank) {\n        dy = dy.reshape(axis_util.expandShapeToKeepDim(dy.shape, origAxes));\n    }\n    return {\n        x: () => {\n            const dx = dy.mul(xOrig.equal(y).cast(dy.dtype));\n            return permutedAxes == null ? dx : dx.transpose(permutedAxes);\n        }\n    };\n}\n//# sourceMappingURL=reduction_ops_util.js.map"]},"metadata":{},"sourceType":"module"}